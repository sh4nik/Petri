package com.sm.petri.core;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import processing.core.PApplet;

public class TestEnvironment extends PApplet {

    List<Bloop> bloops = new ArrayList<>();
    List<Food> foodList = new ArrayList<>();

    private static final int BLOB_COUNT = 50;
    private static final int FOOD_COUNT = 500;

    //vegan
    private double[] genes = {0.021457974571142735,0.7341454815431836,-0.4915694877252843,0.9045216194131696,0.5245117460201754,-0.7765279877410568,0.32156736015378673,0.8775559211796047,0.26932907925670246,-0.1963612370184532,0.48521730384910877,0.18768200305935046,-0.03480664105964981,-0.4768586595256018,-0.6988407200432477,-0.11543825806943664,0.8793134093003612,0.5554587202042944,-0.7833964009264941,-0.44630558496487927,-0.7170181306351484,0.7154500302196132,-0.6311721563411812,-0.47187269001078624,0.13686583822985776,-0.1869769932671862,-0.6860132854632133,0.6438349172575015,0.9203568287008341,-0.1699891991843444,0.9423052305221338,-0.8367748334623815,0.7382510508732523,0.7142602591110068,-0.7434883615336121,-0.8618602882749076,0.03461817163848746,0.8178283371538455,-0.9985163663510505,0.8253789054754608,0.599993874225764,0.829297665932518,0.3862033056528782,0.5016871293777803,0.793057954821982,-0.10872344931325029,-0.6247843517048248,-0.6507645937732338,0.6245920172949768,0.7036590496319484,0.52945096872967,-0.8988088220122291,-0.8971580737030967,0.8538898243228648,-0.035148287433001246,0.9598848759103298,-0.22471967833692197,0.5729064367648462,0.11334759721377585,-0.9197503598220065,0.5430201114022686,0.4673815037746405,0.21433497388249623,-0.07363834536486269,0.6230931290479129,0.8352568419266624,0.20075791403668886,0.2480043962709615,-0.07674898139125408,0.9929429413734336,-0.6789404967983581,-0.9647073978476011,0.542105037146738,0.08509641817889557,0.3853780434898515,-0.20861945376000823,0.8918798821726535,0.025674647890421287,-0.5657766581433306,0.626272901805647,0.6960003636069596,-0.5789021033744566,0.9992808289824242,0.5044589190521416,-0.5139942060955787,0.46485269802269813,0.3045822417607025,-0.26911460777491203,-0.6699281166470442,-0.5444665866774662,0.30466912158407955,-0.7362790796291733,-0.39300775327556947,0.5710668101839411,0.8040273435888876,-0.5195931991375036,0.1410480800878835,-0.9087332761633986,0.013584553034413638,0.9868856919898852,0.7012603198413878,0.5478484210436811,0.5836835344284037,-0.5699822408077266,0.3617940855589217,0.09145094200304027,-0.890430158909976,-0.32727649326605646,-0.7785553773349513,0.17319458470987037,0.0903322485020226,-0.2210670284044619,0.615221360608754,0.3895427341082931,-0.9930774257502233,0.1779283562623728,-0.0227367042151132,0.27736010199351235,-0.9430252746546234,-0.2112989461075745,-0.7558990716934204,-0.6895295194558635,-0.7824998795479768,-0.6493222302872041,0.026482157648187732,0.5764066617880963,0.9836780582516635};
    
    //snark
//    private double[] genes = {0.7494592158471838,-0.8221703967596801,-0.4017014334447918,-0.25017408310672595,0.7916749002858239,-0.5974587233731194,0.3130944784062668,-0.8859003544519424,0.8287966227691612,-0.25637371681080523,-0.8576899869036139,0.10160297786388606,-0.8048177081637126,-0.9110715803483203,0.3961048418181261,-0.2907316454897475,-0.7179321124492987,-0.2395873463804804,0.890907928787849,-0.0685465505971915,0.7271644188387236,-0.454760638404349,-0.22345658187369266,-0.794082805932053,0.8158999788146233,0.9646780984393968,0.5646755736238964,0.8229363085289803,0.18452077759069407,-0.6336615890342885,0.5547846084355341,-0.8927238001238378,-0.19129801709002303,0.5505564919557786,-0.3592981182409679,0.9733865261077881,-0.19094812870025635,0.786249556528928,0.23561937390724652,0.7004990334856553,0.9614552198819479,-0.4048867573507332,-0.2914604524363439,0.8566681816840238,0.5366902084873733,-0.0750516953587187,-0.45477775192232284,0.8065370963435938,0.12227912645840067,0.020601423229230864,0.6119521012557558,-0.7601437060535289,-0.08228205309302594,0.5132254994272314,-0.22908502240411122,-0.4731906991156728,-0.9909620815867004,-0.09621587328059034,0.33993384273255556,0.5313536803078265,-0.3884288625299066,-0.8095513991568124,0.22488263417614696,-0.7344903381854506,-0.036880768145639675,0.19235824495376042,0.27545799391238446,-0.8639097991082607,0.5767107688767628,-0.5690964715483358,-0.4092760080027571,0.43893739521478703,-0.1434742703902242,-0.498430439154252,-0.6882670791093881,0.344186677910431,-0.9939227150738991,-0.34000446725171163,-0.3955547035195759,0.8504040389904761,-0.8609278094630985,-0.30762564421343286,-0.5089193548795113,-0.14529371288262627,-0.4373946230479969,0.8500646277913042,0.27939711866886285,0.9601423055772069,-0.6227109412715564,-0.32035665384502077,-0.7112745995892386,0.6117732286480659,-0.7590386401300875,-0.4723804014437787,-0.4685482288404713,-0.9297214499511107,0.9816059982361285,0.4702152785542921,-0.1021725696283794,-0.11809920266226381,-0.9895252226827492,-0.567986426308748,0.3202499438357189,0.35739371677799925,-0.8721215566322491,-0.06115681190536282,-0.4364156935914456,-0.7867356342698297,-0.545119105732329,-0.4957648691478569,0.8939007757915884,0.5829822103453293,-0.2260448932647705,-0.5143786467412437,0.8197937774983686,-0.25629030383571294,0.3667402955160337,0.8303612526111215,-0.8832535133425271,0.27315430000264995,-0.9572684243221926,-0.5061979851467064,0.7580298934499803,0.3805316354568422,0.7065945644179812,0.6433956515145012,0.7967202667604947};

    public static void main(String[] args) {
        PApplet.main("com.sm.petri.core.TestEnvironment");
    }

    @Override
    public void settings() {
        size(1240, 660);
        
    }

    @Override
    public void setup() {
        background(50);
        for (int i = 0; i < BLOB_COUNT; i++) {
            bloops.add(new Bloop(this, foodList, genes, bloops, null));
        }
    }

    @Override
    public void draw() {

        frameRate(60);
        background(40);

        Iterator<Bloop> iter = bloops.iterator();

        while (iter.hasNext()) {
            Bloop bloop = iter.next();

            bloop.update();
            bloop.display();

            if (bloop.getHealth() <= 0) {
                iter.remove();
            }
        }

        for (int i = foodList == null ? 0 : foodList.size(); i < FOOD_COUNT; i++) {
            foodList.add(new Food(this));
        }

        for (Food food : foodList) {
            food.display();
        }

    }

}
